---
date : 2022-08-2800:15
aliases : []
---
# Metadata
Status :: #ğŸŒ± <br>
Note Type :: #ğŸ“¨/ğŸ’¿ <br>
Source URL :: {æ•™å­¸ URL} <br>
Author :: [[@AC - ReactBeta]] [[@Reactæ€è€ƒæ¨¡å¼]]<br>
Topics :: [[-React Moc]]<br>
Cover ::

# Evergreen Note

Question :: é€™ç¯‡æ–‡ç« ä¸»è¦åœ¨èªªä»€éº¼ ?

Answer ::

---

# Summary 
##### å¦‚ä½•ä½¿ç”¨
```js
useEffect(()=>{
	/*å»ºç«‹ã€æ›´æ–°å…ƒä»¶çš„å‰¯ä½œç”¨å€*/
	return ()=>{
		/*ç§»é™¤å…ƒä»¶çš„å‰¯ä½œç”¨å€*/
	}
},[])/*ç”¨ä¾†é™åˆ¶å‰¯ä½œç”¨è¦ä»¥å“ªäº›stateå’Œpropsä½œç‚ºè§¸ç™¼æ¢ä»¶çš„arra*/
```
##### ç”Ÿå‘½é€±æœŸ
- åˆå§‹åŒ–ï¼ˆç¬¬ä¸€æ¬¡æ¸²æŸ“æ™‚ï¼‰ï¼š
1. å»ºç«‹ã€å‘¼å«function componet
2. å»ºç«‹Virtual DOMã€æ›´æ–°DOM
3. æ¸²æŸ“ç•«é¢
4. **å‘¼å«useEffectå‰¯ä½œç”¨**
- æ›´æ–°ï¼ˆåµæ¸¬åˆ°stateã€propsè¢«æ”¹è®Šæ™‚ï¼‰ï¼š
1. é‡æ–°å‘¼å«function componet
2. åœ¨Virtual DOMæ¯”è¼ƒæ‰€æœ‰å’ŒåŸå§‹DOMä¸ä¸€æ¨£çš„åœ°æ–¹
3. çœŸæ­£æ›´æ–°DOM
4. æ¸²æŸ“ç•«é¢
5. **é€éæª¢æŸ¥useEffectä¸­çš„arrayï¼Œåˆ¤æ–·è©²useEffectæ˜¯å¦ã€Œå’Œè¢«æ”¹è®Šçš„ã€state/propsã€æœ‰é—œä¿‚ï¼Œæœ‰å‰‡å‘¼å«è©²useEffectçš„å‰¯ä½œç”¨**
6. å¦‚æœæœ‰ä¿®æ”¹stateã€propsï¼Œå‰‡å†é‡è¤‡ä¸€æ¬¡ä¸Šè¿°ã€Œæ›´æ–°ã€çš„ç”Ÿå‘½é€±æœŸ
#####ç§»é™¤
1. ç§»é™¤å…ƒä»¶
2. **å‘¼å«useEffectç¬¬ä¸€å€‹åƒæ•¸å›å‚³çš„æ¸…é™¤å‡½å¼**

![[04.png]]
---

# Note
ä½¿ç”¨useEffectæé†’ï¼š
> é¿å…åœ¨ç¬¬ä¸€å€‹åƒæ•¸çš„å‰¯ä½œç”¨å®šç¾©å€ï¼Œä½¿ç”¨ã€æ²’æœ‰è¢«åŠ å…¥è‡³ç¬¬äºŒå€‹ç›¸ä¾åƒæ•¸arrayçš„state/propsã€ï¼Œé€²è€Œå°è‡´ç”¢ç”Ÿéé æœŸçš„éŒ¯èª¤ã€‚
> 
```js
/*--------bad---------*/
useEffect(()=>{
	console.log(text)
},[])
/*------correct-------*/
useEffect(()=>{
	console.log(text)
},[text])
```
ä½¿ç”¨useEffectæ™‚æ©Ÿï¼š
- å‘å¾Œç«¯å‘¼å«API(å¾…è£œuseEffectã€Suspenseå‘¼å«APIå·®ç•°ï¼‰
- ä½¿ç”¨å¤–éƒ¨å‡½å¼åº«
- è¨»å†Š/æ¸…é™¤ç›£è½å™¨
-   useEffect æ˜¯å€‹å¤šåŠŸèƒ½å‡½æ•¸ï¼Œå¯¦å‹™ä¸Šå¸¸ç”¨çš„æ“ä½œï¼š
    1.  ä½¿ç”¨useEffectä»¿é€ Componentå‡ºç”Ÿ(mounted)å’Œæ­»äº¡(unmounted)
        -   Compomentçš„å‡ºç”Ÿæˆ–æ­»äº¡æœƒç…§ç¶å®šçš„è®Šæ•¸æ›´æ”¹è€Œæ”¹è®Š
        ```js
        useEffect(()=> {
        	/*mounted*/
			console.log('%cmounted', 'background:#2ecc71');
		    return () => {
			/*unmounted*/
		      console.log('%cunmount', 'background:#e67e22');
		    };
		},[])
		/*å‡½æ•¸å¾Œé¢çš„åƒæ•¸ç‚ºâ€œç›¸ä¾æ€§â€*/
		/*åŠ ä¸Šç©ºé™£åˆ—ä»£è¡¨ä»€éº¼éƒ½ä¸é—œæ³¨ï¼Œåªå°ˆæ³¨åœ¨å…ƒä»¶çš„å‡ºç”Ÿå’Œæ­»äº¡*/
		```
	2. ä½¿ç”¨useEffectè®Šæ›´è³‡æ–™
		- mountedæ™‚æœƒè·‘ä¸€æ¬¡ä»£ç¢¼
		```js
		useEffect(()=> { 
			/*mounted*/ 
			console.log('%cmounted', 'background:#2ecc71'); 
			return () => { 
			/*unmounted*/ 
			console.log('%cunmount', 'background:#e67e22');
			};
		},) 
		/*ç›¸ä¾æ€§çš„æ¬„ä½ä»€éº¼éƒ½æ²’å¯«ä»£è¡¨ä»€éº¼éƒ½é—œæ³¨(æµªè²»æ•ˆèƒ½)*/
		/*åªè¦componetæ›´æ–°ï¼Œä¸€å®šæœƒè¢«åŸ·è¡Œ*/
		
		```

